<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name = "viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies Api</title>
</head>
<body>

    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body{
            background-color: #131517;
        }
        .box{
            margin:auto;
            margin-top: 14%;
            font-family: 'Open Sans', sans-serif;
            width: 350px;

        }
        #MovieName{
            margin-top:5px;
        }
        #MovieRate{
            margin-top:20px;
        }
        #MovieName, #MovieRate{
            padding: 10px;
            background-color: #252e38;
            color: #fff;
            outline: 0;
            border: 0;
            font-size: 1.3em;
            border-bottom: 2px solid #6023E2;
            width: 250px;
        }
        .button {
            margin-top:20px;
            background-color: #252e38;
            border: 3px solid #6023E2;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
        }
        .button:hover{
            color: #fff;
            background-color: #6023E2;
        }
        #result{
            font-family: 'Open Sans', sans-serif;
            font-size: 12px;
        }
        #header {
            margin-left: 75%;
            margin-top: 0.1%;
            padding: 1rem 1rem;
        }
        .child {
            width: 130px;
            display: inline-block;
            vertical-align: middle;
            background-color: #252e38;
            color: white;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            font-size: 14px;
        }
    </style>
    <div id="main_page">

        <div id="header">
            <form method="post" th:action="@{/logout}">
                <button class="child" style="border: 3px solid #6023E2; margin-right: 10px">Log out</button>
                <button class="child" style="border: 3px solid red;" formaction="/deleteUser">Delete account</button>
            </form>
        </div>

        <div class="box">
            <form method="post">
                <h2 id="result" th:text="${result}"></h2>
                <input id="MovieName" type="text" name="name" placeholder="Name">
                <input id="MovieRate" type="text" name="rate" placeholder="Rate">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button class="button">Create</button>
                <button style="width: 126px; margin-left:20px;" class="button" formmethod="get" formaction="/api/moviesApi">View</button>
            </form>
        </div>
    </div>
    <script>

        let message = document.getElementById("result").innerHTML

        switch (message) {
            case 'You have already rated this movie':
                document.getElementById('MovieName').style.borderBottomColor = 'red'
                document.getElementById('MovieRate').style.borderBottomColor = 'red'
                document.getElementById("result").style.color = 'red'
                break;
            case 'You have successfully rated this movie':
                document.getElementById('MovieName').style.borderBottomColor = '#AFE1AF'
                document.getElementById('MovieRate').style.borderBottomColor = '#AFE1AF'
                document.getElementById("result").style.color = '#AFE1AF'
                break;
        }
    </script>

</body>
</html>